(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{2115:function(e,s,a){Promise.resolve().then(a.bind(a,793))},793:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(7437),r=a(9501),i=a(2265),l=a(9376);function d(){let{register:e,handleSubmit:s,formState:{errors:a,isSubmitting:d},reset:c,watch:n}=(0,r.cI)(),[m,o]=(0,i.useState)(""),[h,u]=(0,i.useState)(""),p=(0,l.useRouter)();n("image");let g=async e=>{try{o("");let s=new FormData;s.append("name",e.name),s.append("address",e.address),s.append("city",e.city),s.append("state",e.state),s.append("contact",e.contact),s.append("email_id",e.email_id),e.image&&e.image[0]&&s.append("image",e.image[0]);let a=await fetch("/api/schools",{method:"POST",body:s}),t=await a.json();a.ok?(o("School added successfully!"),c(),u(""),setTimeout(()=>{p.push("/showSchools")},2e3)):o(t.error||"Failed to add school")}catch(e){o("Error adding school. Please try again.")}};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsx)("h1",{children:"Add New School"}),(0,t.jsx)("p",{children:"Fill in the details below to add a new school to the system"})]}),m&&(0,t.jsx)("div",{className:"alert ".concat(m.includes("successfully")?"alert-success":"alert-error"),children:m}),(0,t.jsxs)("form",{onSubmit:s(g),className:"school-form",children:[(0,t.jsxs)("div",{className:"form-grid",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"name",children:"School Name *"}),(0,t.jsx)("input",{type:"text",id:"name",...e("name",{required:"School name is required",minLength:{value:2,message:"Name must be at least 2 characters"},maxLength:{value:100,message:"Name must not exceed 100 characters"}}),className:a.name?"error":""}),a.name&&(0,t.jsx)("span",{className:"error-text",children:a.name.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email_id",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",id:"email_id",...e("email_id",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email address"}}),className:a.email_id?"error":""}),a.email_id&&(0,t.jsx)("span",{className:"error-text",children:a.email_id.message})]}),(0,t.jsxs)("div",{className:"form-group full-width",children:[(0,t.jsx)("label",{htmlFor:"address",children:"Address *"}),(0,t.jsx)("input",{type:"text",id:"address",...e("address",{required:"Address is required",minLength:{value:10,message:"Address must be at least 10 characters"}}),className:a.address?"error":""}),a.address&&(0,t.jsx)("span",{className:"error-text",children:a.address.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"city",children:"City *"}),(0,t.jsx)("input",{type:"text",id:"city",...e("city",{required:"City is required",minLength:{value:2,message:"City must be at least 2 characters"}}),className:a.city?"error":""}),a.city&&(0,t.jsx)("span",{className:"error-text",children:a.city.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"state",children:"State *"}),(0,t.jsx)("input",{type:"text",id:"state",...e("state",{required:"State is required",minLength:{value:2,message:"State must be at least 2 characters"}}),className:a.state?"error":""}),a.state&&(0,t.jsx)("span",{className:"error-text",children:a.state.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"contact",children:"Contact Number *"}),(0,t.jsx)("input",{type:"tel",id:"contact",...e("contact",{required:"Contact number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid 10-digit phone number"}}),className:a.contact?"error":""}),a.contact&&(0,t.jsx)("span",{className:"error-text",children:a.contact.message})]}),(0,t.jsxs)("div",{className:"form-group full-width",children:[(0,t.jsx)("label",{htmlFor:"image",children:"School Image *"}),(0,t.jsx)("input",{type:"file",id:"image",accept:"image/jpeg,image/jpg,image/png",...e("image",{required:"School image is required",onChange:e=>{let s=e.target.files[0];if(s){if(!["image/jpeg","image/jpg","image/png"].includes(s.type)){o("Please select a valid image file (JPG, JPEG, PNG)");return}if(s.size>5242880){o("Image size must be less than 5MB");return}let e=new FileReader;e.onloadend=()=>u(e.result),e.readAsDataURL(s),o("")}}}),className:a.image?"error":""}),a.image&&(0,t.jsx)("span",{className:"error-text",children:a.image.message}),h&&(0,t.jsx)("div",{className:"image-preview",children:(0,t.jsx)("img",{src:h,alt:"Preview"})})]})]}),(0,t.jsxs)("div",{className:"form-actions",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{c(),u(""),o("")},children:"Reset Form"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Adding School...":"Add School"})]})]})]})}}},function(e){e.O(0,[853,971,117,744],function(){return e(e.s=2115)}),_N_E=e.O()}]);